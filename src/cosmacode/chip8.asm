;--------------------------------------------------------
;
      		LIST       
    		RADIX      dec
;
		INCLUDE p18cxxx.inc
;		
		UDATA_ACS

		CODE
;
;--------------------------------------------------------
;
		EXTERN load_code
;
		GLOBAL load_chip8
		GLOBAL load_ch8_code
;
;--------------------------------------------------------
;
load_chip8
		LFSR	FSR0, 0x0000
		MOVLW	HIGH(chip8_interp)
		MOVWF	TBLPTRH, a
		MOVLW	LOW(chip8_interp)
		MOVWF	TBLPTRL, a
		CALL	load_code
;				
		RETURN		
;
;--------------------------------------------------------
;		
load_ch8_code		
		LFSR	FSR0, 0x0200
		TBLRD   *-		
		TBLRD   *-		
		TBLRD   *+		
		MOVFF   TABLAT, FSR1L		
		TBLRD   *+		
		MOVFF   TABLAT, FSR1H		
loop2		
		TBLRD   *+		
		MOVFF   TABLAT, WREG
		TBLRD   *+		
		MOVFF	TABLAT,POSTINC0
		MOVFF	WREG,POSTINC0
				
		MOVF	POSTDEC1, w, a
		MOVF	POSTDEC1, w, a
		
		MOVF	FSR1L, w, a
		IORWF	FSR1H, w, a
		BNZ	loop2
;	
                RETURN
;
;--------------------------------------------------------
;
		DW 0x0200
chip8_interp
;
		DB 0x91, 0xBB, 0xFF, 0x01, 0xB2, 0xB6, 0xF8, 0xCF, 0xA2, 0xF8, 0x81, 0xB1, 0xF8, 0x46, 0xA1, 0x90
		DB 0xB4, 0xF8, 0x1B, 0xA4, 0xF8, 0x01, 0xB5, 0xF8, 0xFC, 0xA5, 0xD4, 0x96, 0xB7, 0xE2, 0x94, 0xBC
		DB 0x45, 0xAF, 0xF6, 0xF6, 0xF6, 0xF6, 0x32, 0x44, 0xF9, 0x50, 0xAC, 0x8F, 0xFA, 0x0F, 0xF9, 0xF0
		DB 0xA6, 0x05, 0xF6, 0xF6, 0xF6, 0xF6, 0xF9, 0xF0, 0xA7, 0x4C, 0xB3, 0x8C, 0xFC, 0x0F, 0xAC, 0x0C
		DB 0xA3, 0xD3, 0x30, 0x1B, 0x8F, 0xFA, 0x0F, 0xB3, 0x45, 0x30, 0x40, 0x22, 0x69, 0x12, 0xD4, 0x00
		DB 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01
		DB 0x00, 0x7C, 0x75, 0x83, 0x8B, 0x95, 0xB4, 0xB7, 0xBC, 0x91, 0xEB, 0xA4, 0xD9, 0x70, 0x99, 0x05
		DB 0x06, 0xFA, 0x07, 0xBE, 0x06, 0xFA, 0x3F, 0xF6, 0xF6, 0xF6, 0x22, 0x52, 0x07, 0xFA, 0x1F, 0xFE
		DB 0xFE, 0xFE, 0xF1, 0xAC, 0x9B, 0xBC, 0x45, 0xFA, 0x0F, 0xAD, 0xA7, 0xF8, 0xD0, 0xA6, 0x93, 0xAF
		DB 0x87, 0x32, 0xF3, 0x27, 0x4A, 0xBD, 0x9E, 0xAE, 0x8E, 0x32, 0xA4, 0x9D, 0xF6, 0xBD, 0x8F, 0x76
		DB 0xAF, 0x2E, 0x30, 0x98, 0x9D, 0x56, 0x16, 0x8F, 0x56, 0x16, 0x30, 0x8E, 0x00, 0xEC, 0xF8, 0xD0
		DB 0xA6, 0x93, 0xA7, 0x8D, 0x32, 0xD9, 0x06, 0xF2, 0x2D, 0x32, 0xBE, 0xF8, 0x01, 0xA7, 0x46, 0xF3
		DB 0x5C, 0x02, 0xFB, 0x07, 0x32, 0xD2, 0x1C, 0x06, 0xF2, 0x32, 0xCE, 0xF8, 0x01, 0xA7, 0x06, 0xF3
		DB 0x5C, 0x2C, 0x16, 0x8C, 0xFC, 0x08, 0xAC, 0x3B, 0xB3, 0xF8, 0xFF, 0xA6, 0x87, 0x56, 0x12, 0xD4
		DB 0x9B, 0xBF, 0xF8, 0xFF, 0xAF, 0x93, 0x5F, 0x8F, 0x32, 0xDF, 0x2F, 0x30, 0xE5, 0x00, 0x42, 0xB5
		DB 0x42, 0xA5, 0xD4, 0x8D, 0xA7, 0x87, 0x32, 0xAC, 0x2A, 0x27, 0x30, 0xF5, 0x00, 0x00, 0x00, 0x00
		
		DB 0x00, 0x00, 0x00, 0x00, 0x00, 0x45, 0xA3, 0x98, 0x56, 0xD4, 0xF8, 0x81, 0xBC, 0xF8, 0x95, 0xAC
		DB 0x22, 0xDC, 0x12, 0x56, 0xD4, 0x06, 0xB8, 0xD4, 0x06, 0xA8, 0xD4, 0x64, 0x0A, 0x01, 0xE6, 0x8A
		DB 0xF4, 0xAA, 0x3B, 0x28, 0x9A, 0xFC, 0x01, 0xBA, 0xD4, 0xF8, 0x81, 0xBA, 0x06, 0xFA, 0x0F, 0xAA
		DB 0x0A, 0xAA, 0xD4, 0xE6, 0x06, 0xBF, 0x93, 0xBE, 0xF8, 0x1B, 0xAE, 0x2A, 0x1A, 0xF8, 0x00, 0x5A
		DB 0x0E, 0xF5, 0x3B, 0x4B, 0x56, 0x0A, 0xFC, 0x01, 0x5A, 0x30, 0x40, 0x4E, 0xF6, 0x3B, 0x3C, 0x9F
		DB 0x56, 0x2A, 0x2A, 0xD4, 0x00, 0x22, 0x86, 0x52, 0xF8, 0xF0, 0xA7, 0x07, 0x5A, 0x87, 0xF3, 0x17
		DB 0x1A, 0x3A, 0x5B, 0x12, 0xD4, 0x22, 0x86, 0x52, 0xF8, 0xF0, 0xA7, 0x0A, 0x57, 0x87, 0xF3, 0x17
		DB 0x1A, 0x3A, 0x6B, 0x12, 0xD4, 0x15, 0x85, 0x22, 0x73, 0x95, 0x52, 0x25, 0x45, 0xA5, 0x86, 0xFA
		DB 0x0F, 0xB5, 0xD4, 0x45, 0xE6, 0xF3, 0x3A, 0x82, 0x15, 0x15, 0xD4, 0x45, 0xE6, 0xF3, 0x3A, 0x88
		DB 0xD4, 0x45, 0x07, 0x30, 0x8C, 0x45, 0x07, 0x30, 0x84, 0xE6, 0x62, 0x26, 0x45, 0xA3, 0x36, 0x88
		DB 0xD4, 0x3E, 0x88, 0xD4, 0xF8, 0xF0, 0xA7, 0xE7, 0x45, 0xF4, 0xA5, 0x86, 0xFA, 0x0F, 0x3B, 0xB2
		DB 0xFC, 0x01, 0xB5, 0xD4, 0x45, 0x56, 0xD4, 0x45, 0xE6, 0xF4, 0x56, 0xD4, 0x45, 0xFA, 0x0F, 0x3A
		DB 0xC4, 0x07, 0x56, 0xD4, 0xAF, 0x22, 0xF8, 0xD3, 0x73, 0x8F, 0xF9, 0xF0, 0x52, 0xE6, 0x07, 0xD2
		DB 0x56, 0xF8, 0xFF, 0xA6, 0xF8, 0x00, 0x7E, 0x56, 0xD4, 0x19, 0x89, 0xAE, 0x93, 0xBE, 0x99, 0xEE
		DB 0xF4, 0x56, 0x76, 0xE6, 0xF4, 0xB9, 0x56, 0x45, 0xF2, 0x56, 0xD4, 0x45, 0xAA, 0x86, 0xFA, 0x0F
		DB 0xBA, 0xD4, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x4B
chip8test
		DB 0x00, 0x40
		DB 0xA2, 0x10, 0x61, 0x07, 0x62, 0x05, 0x22, 0x20, 0x71, 0x01, 0x72, 0x01, 0x12, 0x06, 0x00, 0x00
		DB 0xF0, 0x90, 0xF0, 0x90, 0xF0, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00    
		DB 0xD1, 0x25, 0xD1, 0x25, 0x41, 0x30, 0x61, 0x08, 0x32, 0x10, 0x00, 0xEE, 0x62, 0x08, 0x00, 0xEE
		DB 0x62, 0x08, 0x00, 0xEE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
		
		END